"use strict";$(function(){function appreciate(){$(".appreciate-btn").on("click",function(e){$(".qr-code").addClass("qr-code-display");$(document).one("click",function(){$(".qr-code").removeClass("qr-code-display")});e.stopPropagation()});$(".qr-code").on("click",function(e){e.stopPropagation()});$(".closinglayer").on("click",function(e){$(".qr-code").removeClass("qr-code-display")});$(".zfb-btn").on("click",function(e){$(".qr_code_zfb").css("opacity","1");$(".qr_code_wx").css("opacity","0")});$(".wx-btn").on("click",function(e){$(".qr_code_wx").css("opacity","1");$(".qr_code_zfb").css("opacity","0")})}function removeFirstUL(){var post_content=document.getElementById("post-content");var firstNodeName=post_content.firstElementChild.nodeName;if(firstNodeName==="UL"){$(post_content.firstElementChild).hide()}}function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop}function scrollTocFixed(div_id){var Obj=$("#"+div_id);if(Obj.length!=1){return false}var tocId="#toc";window.addEventListener("scroll",function(){var tocFixed=$(tocId);var ObjTop=Obj.offset().top-$(window).height()*.5;var scrollTop=getScrollTop();var postHeaderHeight=$("#postHeader").height();if(scrollTop>postHeaderHeight){tocFixed.show()}else{tocFixed.hide()}var tocEle=document.querySelector(tocId);var tocHeight=tocEle.getBoundingClientRect().height;if(scrollTop>ObjTop-tocHeight*.5){tocFixed.addClass("right-fixed")}else{tocFixed.removeClass("right-fixed")}})}function initToc(){var headerEl="h1,h2,h3,h4,h5,h6",content=".post-content";tocbot.init({tocSelector:"#toc",contentSelector:content,headingSelector:headerEl,scrollSmooth:true,hasInnerContainers:false});var tocLinks=$(".toc-link");if(tocLinks){for(var i=0;i<tocLinks.length;i++){var tocLink=tocLinks[i];tocLink.after(document.createElement("span"))}}}function readProgress(){var $content=$("#siteMain");var $readProgressBar=$("#readProgress .read-progress-bar");var changeReadProgress=function(){var contentHeight=$content.height()-window.innerHeight;if(contentHeight<=0)return;var readHeight=window.pageYOffset-$content.offset().top;var progressWidth=readHeight/contentHeight*100+"%";$readProgressBar.width(progressWidth)};displayReadProgress&&changeReadProgress();$(window).on("scroll",function(){displayReadProgress&&changeReadProgress()})}appreciate();initToc();removeFirstUL();scrollTocFixed("tocFlag");readProgress()});