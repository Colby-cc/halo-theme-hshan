var post={appreciateModel:function(){$(".appreciate-btn").on("click",function(e){$(".qr-code-wrap").show();$(document).one("click",function(){$(".qr-code-wrap").hide()});e.stopPropagation()})},toggleSocialShare:function(){$(".share-btn").on("click",function(e){$("#socialShare").toggleClass("no-show")})},appreciate:function(){$(".qr-code").on("click",function(e){e.stopPropagation()});$(".closinglayer").on("click",function(e){$(".qr-code-wrap").hide()});$(".zfb-btn").on("click",function(e){$(".qr_code_zfb").css("height","300px");$(".qr_code_wx").css("height","0")});$(".wx-btn").on("click",function(e){$(".qr_code_wx").css("height","300px");$(".qr_code_zfb").css("height","0")})},removeFirstUL:function(){var post_content=document.getElementById("post-content");if(!post_content){return}var firstNodeName=post_content.firstElementChild.nodeName;if(firstNodeName==="UL"){$(post_content.firstElementChild).hide()}},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},scrollTocFixed:function(div_id){var Obj=$("#"+div_id);if(Obj.length!=1){return false}var tocId="#toc";window.addEventListener("scroll",function(){var tocFixed=$(tocId);var ObjTop=Obj.offset().top-$(window).height()*.5;var scrollTop=post.getScrollTop();var postHeaderHeight=$("#postHeader").height();if(scrollTop>postHeaderHeight){tocFixed.show()}else{tocFixed.hide()}var tocEle=document.querySelector(tocId);if(!tocEle||!tocEle.getBoundingClientRect()){return}var tocHeight=tocEle.getBoundingClientRect().height;if(scrollTop>ObjTop-tocHeight*.5){tocFixed.addClass("right-fixed")}else{tocFixed.removeClass("right-fixed")}})},initToc:function(){var headerEl="h1,h2,h3,h4,h5,h6",content=".post-content";tocbot.init({tocSelector:"#toc",contentSelector:content,headingSelector:headerEl,scrollSmooth:true,headingsOffset:0-$("#postHeader").height(),hasInnerContainers:false});var tocLinks=$(".toc-link");if(tocLinks){for(var i=0;i<tocLinks.length;i++){var tocLink=tocLinks[i];tocLink.after(document.createElement("span"))}}},readProgress:function(){var $content=$("#main");var $readProgressBar=$("#readProgress .read-progress-bar");var changeReadProgress=function(){var contentHeight=$content.height()-window.innerHeight;if(contentHeight<=0)return;var readHeight=window.pageYOffset-$content.offset().top;var progressWidth=readHeight/contentHeight*100+"%";$readProgressBar.width(progressWidth)};displayReadProgress&&changeReadProgress();$(window).on("scroll",function(){displayReadProgress&&changeReadProgress()})},initViewAndCode:function(){if(document.getElementById("post-content")){new Viewer(document.getElementById("post-content"),{toolbar:false})}hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad({singleLine:true})}};$(function(){post.appreciate();post.initToc();post.removeFirstUL();post.scrollTocFixed("tocFlag");post.readProgress();post.appreciateModel();post.toggleSocialShare();post.initViewAndCode()});